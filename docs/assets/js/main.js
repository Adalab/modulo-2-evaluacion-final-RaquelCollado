"use strict";const inputElement=document.querySelector(".js-input"),btnElement=document.querySelector(".js-btn"),serieSection=document.querySelector(".js-ulseries"),favoriteSection=document.querySelector(".js-ulFavorites"),rstFav=document.querySelector(".js-btnX");let serieList=[],serieFavorite=[];const serieLS=JSON.parse(localStorage.getItem("serieFavorite"));function handleClick(e){e.preventDefault(),serieSection.innerHTML="";const t=inputElement.value;fetch("//api.tvmaze.com/search/shows?q="+t).then(e=>e.json()).then(e=>{serieList=e,inputElement.value="";for(const t of e){const e="//via.placeholder.com/210x295/ffffff/666666/?text=TV",i=t.show.image&&t.show.image.medium?t.show.image.medium:e;serieSection.innerHTML+=`<li id=${t.show.id} class="card js-card" ><img class="image" src=${i} alt=""><h2>${t.show.name}</h2></li>`}addEventToSeries()})}function renderFavorite(){favoriteSection.innerHTML="";for(const e of serieFavorite){const t="//via.placeholder.com/210x295/ffffff/666666/?text=TV",i=e.show.image&&e.show.image.medium?e.show.image.medium:t;favoriteSection.innerHTML+=`<li id=${e.show.id} class="card js-card"><img class="image" src=${i} alt=""><h2>${e.show.name}</h2></li>`,event.currentTarget.classList.add("cardFavorite")}}function handleFavorites(e){e.preventDefault();const t=parseInt(e.currentTarget.id),i=serieFavorite.findIndex(e=>e.show.id===t);if(-1===i){const e=serieList.find(e=>e.show.id===t);serieFavorite.push(e)}else{e.currentTarget.classList.remove("card"),serieFavorite.splice(i,1);document.getElementById(t)&&(e.currentTarget.classList.remove("card"),e.currentTarget.classList.add("cardFavorite"))}renderFavorite(),localStorage.setItem("serieFavorite",JSON.stringify(serieFavorite))}function addEventToSeries(){const e=document.querySelectorAll(".js-card");for(const t of e)t.addEventListener("click",handleFavorites)}function handleResetFav(e){e.preventDefault(),serieFavorite=[],favoriteSection.innerHTML="",localStorage.removeItem("serieFavorite"),inputElement.value="",location.reload()}rstFav.addEventListener("click",handleResetFav),btnElement.addEventListener("click",handleClick);